import"./modulepreload-polyfill-B5Qt9EMX.js";import{getAuth as u}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";import{initializeApp as b}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";import{_ as p}from"./preload-helper-D7HrI6pR.js";async function s(t,c,r){const i=auth.currentUser;if(!i){alert("Please sign in or create an account first to subscribe."),window.location.href="/#firebaseui-auth-container";return}const o=r.currentTarget;o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Preparing Test...',o.disabled=!0;try{const a=await i.getIdToken(!0),e=await fetch(PAYMENT_FUNCTION_URL,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({planId:t,priceId:c})});if(!e.ok)throw new Error(`Server error: ${await e.text()}`);const n=await e.json();if(n.checkoutUrl)console.log("Redirecting to Paddle Sandbox checkout:",n.checkoutUrl),window.location.href=n.checkoutUrl;else throw new Error("Could not get checkout URL.")}catch(a){console.error("Payment test failed:",a),alert("Could not start test payment. Check console for errors."),o.innerHTML=t==="monthly"?"Become an Insider":"Go Trailblazer",o.disabled=!1}}document.getElementById("subscribe-monthly-btn").addEventListener("click",t=>s("monthly",PADDLE_PRICE_ID_MONTHLY,t));document.getElementById("subscribe-yearly-btn").addEventListener("click",t=>s("yearly",PADDLE_PRICE_ID_YEARLY,t));const g={apiKey:"YOUR_API_KEY",authDomain:"YOUR_AUTH_DOMAIN",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_STORAGE_BUCKET",messagingSenderId:"YOUR_SENDER_ID",appId:"YOUR_APP_ID"},h=b(g),m=u(h),y="pri_...your_monthly_id...",f="pri_...your_yearly_id...",E="https://your-vercel-project-name.vercel.app/api/create-payment";async function l(t,c,r){const i=m.currentUser;if(!i){alert("Please sign in or create an account first to subscribe."),window.location.href="/#firebaseui-auth-container";return}const o=r.currentTarget;o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Redirecting...',o.disabled=!0;try{const a=await i.getIdToken(!0),e=await fetch(E,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({planId:t,priceId:c})});if(!e.ok)throw new Error(`Server error: ${await e.text()}`);const n=await e.json();if(n.checkoutUrl)window.location.href=n.checkoutUrl;else throw new Error("Could not get checkout URL.")}catch(a){console.error("Payment failed:",a),alert("Could not start payment process. Please try again."),o.innerHTML=t==="monthly"?"Become an Insider":"Go Trailblazer",o.disabled=!1}}document.getElementById("subscribe-monthly-btn").addEventListener("click",t=>l("monthly",y,t));document.getElementById("subscribe-yearly-btn").addEventListener("click",t=>l("yearly",f,t));document.addEventListener("DOMContentLoaded",()=>{console.log("Subpage Navbar Script: DOM loaded. Initializing...");const t=document.getElementById("landing-navbar"),c=document.getElementById("hamburger-btn"),r=document.getElementById("mobile-nav-menu"),i=document.getElementById("landing-navbar-actions"),o=document.getElementById("mobile-nav-actions");if(!t||!c||!r||!i||!o){console.error("Subpage Navbar Script: FATAL - One or more navbar elements not found. Check that the `landing-navbar-actions` and `mobile-nav-actions` divs were added to the HTML.");return}console.log("Subpage Navbar Script: All elements found successfully."),c.addEventListener("click",e=>{e.stopPropagation(),r.classList.toggle("active")}),document.addEventListener("click",e=>{r.classList.contains("active")&&(r.contains(e.target)||r.classList.remove("active"))}),window.addEventListener("scroll",()=>{t.classList.toggle("scrolled",window.scrollY>50)}),console.log("Subpage Navbar Script: Core listeners (hamburger, scroll) attached.");function a(e){let n="";e?(console.log("Subpage Navbar Script: Auth state is LOGGED IN."),n='<a href="/app.html">Enter App</a>'):(console.log("Subpage Navbar Script: Auth state is LOGGED OUT."),n='<a href="/#firebaseui-auth-container">Sign In / Sign Up</a>'),i.innerHTML=n,o.innerHTML=n,console.log("Subpage Navbar Script: Desktop and Mobile action buttons updated.")}try{console.log("Subpage Navbar Script: Attempting to connect to Firebase Auth..."),p(async()=>{const{getAuth:e,onAuthStateChanged:n}=await import("https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js");return{getAuth:e,onAuthStateChanged:n}},[]).then(({getAuth:e,onAuthStateChanged:n})=>{const d=e();console.log("Subpage Navbar Script: Firebase Auth instance found. Setting up listener..."),n(d,a)}).catch(e=>{console.error("Subpage Navbar Script: FAILED to load Firebase Auth module. Buttons will not update.",e),a(null)})}catch(e){console.error("Subpage Navbar Script: CRITICAL - Could not initialize auth logic. Is the main Firebase config on this page?",e)}console.log("Subpage Navbar Script: Initialization sequence finished.")});
