import"./modulepreload-polyfill-B5Qt9EMX.js";const a=(e,n)=>{const t=document.getElementById(e);t&&(t.textContent=n?String(n):"N/A")},u=(e,n)=>{const t=document.getElementById(e);t&&n&&n.length>0?(t.innerHTML="",n.forEach(r=>{const i=document.createElement("span");i.className="pill",i.textContent=r,t.appendChild(i)})):t&&(t.innerHTML='<span class="pill muted">None listed</span>')},h=(e,n)=>{const t=document.getElementById(e);if(!t||!n||Object.keys(n).length===0){t&&(t.innerHTML="<p>No specific interests detailed.</p>");return}t.innerHTML="";for(const r in n){const i=document.createElement("div");i.className="interest-category-item";const s=document.createElement("h4");s.innerHTML=`<i class="fas fa-tag"></i> ${r}`,i.appendChild(s);const o=n[r],l=document.createElement("div");l.className="pill-container",(Array.isArray(o)?o:[o]).forEach(d=>{if(d){const c=document.createElement("span");c.className="pill",c.textContent=String(d),l.appendChild(c)}}),i.appendChild(l),t.appendChild(i)}},f=(e,n)=>{const t=document.getElementById(e);if(!t||!n||n.length===0){t&&(t.innerHTML="<p>No significant life events detailed.</p>");return}t.innerHTML="",n.forEach(r=>{const i=document.createElement("div");i.className="event-item",i.innerHTML=`
            <span class="event-date">${r.date}</span>
            <strong>${r.event}</strong>
            ${r.description?`<p>${r.description}</p>`:""}
        `,t.appendChild(i)})},g=(e,n,t)=>{const r=document.getElementById(e);if(!r)return;r.innerHTML="";const i=(s,o)=>{if(o&&o.length>0){const l=document.createElement("h4");l.textContent=s,r.appendChild(l);const d=document.createElement("ul");o.forEach(c=>{const m=document.createElement("li");m.innerHTML=`<i class="fas fa-flag"></i> ${c.lang} <span class="pill muted">${c.levelTag}</span>`,d.appendChild(m)}),r.appendChild(d)}};i("Native Languages",n),i("Practicing / Fluent",t)};function y(e){if(!e.activeTimezone||!e.sleepSchedule)return"Activity status unknown";try{const n=new Date,i=new Intl.DateTimeFormat([],{timeZone:e.activeTimezone,hour:"numeric",minute:"numeric",hour12:!1}).formatToParts(n).find(s=>s.type==="hour");if(i){const s=parseInt(i.value,10),o=parseInt(e.sleepSchedule.wake.split(":")[0],10),l=parseInt(e.sleepSchedule.sleep.split(":")[0],10);return l<o?s>=o||s<l?"Likely Awake":"Likely Sleeping":s>=o&&s<l?"Likely Awake":"Likely Sleeping"}return"Likely Active (Timezone: "+e.activeTimezone+")"}catch{return"Activity status unknown (Timezone: "+e.activeTimezone+")"}}document.addEventListener("DOMContentLoaded",()=>{const n=new URLSearchParams(window.location.search).get("id");if(!n){document.body.innerHTML='<h1>Error: Persona ID not provided.</h1><a href="/app.html">Back to App</a>';return}const t=(window.opener||window.parent||window).polyglotConnectors;if(!t){const i=localStorage.getItem("polyglotConnectors");if(i)try{const o=JSON.parse(i).find(l=>l.id===n);o?p(o):document.body.innerHTML=`<h1>Error: Persona with ID '${n}' not found (from storage).</h1>`}catch{document.body.innerHTML="<h1>Error: Could not load persona data. Please open from the main app.</h1>"}else document.body.innerHTML="<h1>Error: Persona data not available. Please ensure the main app is loaded or open this from within the app.</h1>";return}const r=t.find(i=>i.id===n);if(!r){document.body.innerHTML=`<h1>Error: Persona with ID '${n}' not found.</h1><a href="/app.html">Back to App</a>`;return}p(r)});function p(e){var r,i,s;console.log("Populating Dossier for:",e);const n=document.getElementById("dossier-avatar");n&&(n.src=e.avatarModern||"/images/placeholder_avatar.png",n.alt=e.profileName),a("dossier-profile-name",e.profileName),a("dossier-full-name",`(${e.name})`),a("dossier-profession",e.profession),a("dossier-location",`${e.city}, ${e.country}`),a("dossier-bio",e.bioModern),a("dossier-education",e.education),u("dossier-personality-traits",e.personalityTraits),a("dossier-communication-style",e.communicationStyle),a("dossier-chat-style",(r=e.chatPersonality)==null?void 0:r.style),a("dossier-quirks",(i=e.quirksOrHabits)==null?void 0:i.join(", ")),h("dossier-interests-structured",e.interestsStructured),u("dossier-interests-general",e.interests),u("dossier-dislikes",e.dislikes),f("dossier-key-life-events",e.keyLifeEvents),g("dossier-language-profile",e.nativeLanguages,e.practiceLanguages),a("dossier-relationship-status",(s=e.relationshipStatus)==null?void 0:s.status);const t=document.getElementById("dossier-relationship-details");t&&e.relationshipStatus&&(t.innerHTML="",e.relationshipStatus.partner&&(t.innerHTML+=`<p><strong>Partner:</strong> ${e.relationshipStatus.partner.name} (${e.relationshipStatus.partner.occupation})</p>`,e.relationshipStatus.partner.interests&&(t.innerHTML+=`<p><em>Interests: ${e.relationshipStatus.partner.interests.join(", ")}</em></p>`)),e.relationshipStatus.howTheyMet&&(t.innerHTML+=`<p><em>Met: ${e.relationshipStatus.howTheyMet}</em></p>`),e.relationshipStatus.lookingFor&&(t.innerHTML+=`<p><em>Seeking: ${e.relationshipStatus.lookingFor}</em></p>`),e.relationshipStatus.details&&(t.innerHTML+=`<p><em>Notes: ${e.relationshipStatus.details}</em></p>`)),a("dossier-active-timezone",e.activeTimezone),a("dossier-daily-routine",e.dailyRoutineNotes),a("dossier-current-activity-status",y(e))}
