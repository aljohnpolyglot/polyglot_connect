import"./modulepreload-polyfill-B5Qt9EMX.js";import{getAuth as d}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";import{initializeApp as u}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";import"./subpage-navbar-Bv3CJG-1.js";import"./preload-helper-D7HrI6pR.js";async function s(e,i,c){const a=auth.currentUser;if(!a){alert("Please sign in or create an account first to subscribe."),window.location.href="/#firebaseui-auth-container";return}const t=c.currentTarget;t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Preparing Test...',t.disabled=!0;try{const r=await a.getIdToken(!0),n=await fetch(PAYMENT_FUNCTION_URL,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({planId:e,priceId:i})});if(!n.ok)throw new Error(`Server error: ${await n.text()}`);const o=await n.json();if(o.checkoutUrl)console.log("Redirecting to Paddle Sandbox checkout:",o.checkoutUrl),window.location.href=o.checkoutUrl;else throw new Error("Could not get checkout URL.")}catch(r){console.error("Payment test failed:",r),alert("Could not start test payment. Check console for errors."),t.innerHTML=e==="monthly"?"Become an Insider":"Go Trailblazer",t.disabled=!1}}document.getElementById("subscribe-monthly-btn").addEventListener("click",e=>s("monthly",PADDLE_PRICE_ID_MONTHLY,e));document.getElementById("subscribe-yearly-btn").addEventListener("click",e=>s("yearly",PADDLE_PRICE_ID_YEARLY,e));const y={apiKey:"YOUR_API_KEY",authDomain:"YOUR_AUTH_DOMAIN",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_STORAGE_BUCKET",messagingSenderId:"YOUR_SENDER_ID",appId:"YOUR_APP_ID"},h=u(y),m=d(h),f="pri_...your_monthly_id...",p="pri_...your_yearly_id...",_="https://your-vercel-project-name.vercel.app/api/create-payment";async function l(e,i,c){const a=m.currentUser;if(!a){alert("Please sign in or create an account first to subscribe."),window.location.href="/#firebaseui-auth-container";return}const t=c.currentTarget;t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Redirecting...',t.disabled=!0;try{const r=await a.getIdToken(!0),n=await fetch(_,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({planId:e,priceId:i})});if(!n.ok)throw new Error(`Server error: ${await n.text()}`);const o=await n.json();if(o.checkoutUrl)window.location.href=o.checkoutUrl;else throw new Error("Could not get checkout URL.")}catch(r){console.error("Payment failed:",r),alert("Could not start payment process. Please try again."),t.innerHTML=e==="monthly"?"Become an Insider":"Go Trailblazer",t.disabled=!1}}document.getElementById("subscribe-monthly-btn").addEventListener("click",e=>l("monthly",f,e));document.getElementById("subscribe-yearly-btn").addEventListener("click",e=>l("yearly",p,e));
